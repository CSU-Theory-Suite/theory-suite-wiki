<!DOCTYPE html>
<html class="writer-html5" lang="python" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Submitting Jobs &mdash; csu-wiki  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a9e91e84" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=d048f138"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Fun with Coworkers" href="fun_with_coworkers.html" />
    <link rel="prev" title="File System Layout" href="file_system_layout.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            csu-wiki
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Adding Packages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adding_pages/how_to_add_pages.html">Adding Pages to the Wiki</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="paton_computing_resources.html">Paton Lab Computing Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="kim_computing_resources.html">Kim Lab Computing Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="essential_unix_commands.html">Essential Unix Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_system_layout.html">File System Layout</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Submitting Jobs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#halting-and-canceling-interactive-processes">Halting and Canceling Interactive Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-in-background-vs-foreground-and-nohup">Running in Background vs Foreground, and nohup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#listing-and-killing-jobs-running-in-background">Listing and Killing Jobs Running in Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-a-slurm-queueing-manager">Using a SLURM Queueing Manager</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submit-slurm-jobs">Submit SLURM Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-on-jobs">Checking on Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cancel-slurm-jobs">Cancel SLURM Jobs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fun_with_coworkers.html">Fun with Coworkers</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_resources.html">Coding Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_files.html">Working with Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="moving_renaming_files.html">Moving/Renaming Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminal_basics.html">Terminal Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_computers.html">Working with Computers</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_github.html">Using GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Helpful Packages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html">GoodVibes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#dbstep">DBSTEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#reggae">REGGAE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#disco">DISCO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#aqme">AQME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#slurm-job-tracking">Slurm Job Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#pyssian">pyssian</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#rdkit">RDKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#crest">CREST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#robert">ROBERT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpful_packages/helpful_packages.html#yadda">YADDA</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graphical Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../graphical_software/edition_generation/inkscape_gimp.html">Inkscape &amp; GIMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graphical_software/edition_generation/matplotlib.html">Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graphical_software/edition_generation/pymol.html">PyMOL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../running_calculations/example_aqme_workflow/example_aqme_workflow.html">End-to-End Workflow in ACME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_calculations/example_goodvibes_workflow/example_goodvibes_workflow.html">GoodVibes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_calculations/example_reggae_workflow/example_reggae_workflow.html">REGGAE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_calculations/example_descriptors_workflow/example_descriptors_workflow.html">RDKit, Mordred, Morfeus &amp; DBStep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_calculations/example_censo_workflow/example_censo_workflow.html">CENSO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_calculations/example_nciplot_calculation/example_nciplot_calculation.html">NCIPLOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_calculations/example_qcalibrate_ts_conf_search/example_qcalibrate_ts_conf_search.html">qcalibrate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_calculations/example_yadda_workflow/example_yadda_workflow.html">YADDA</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/classical_molecular_dynamics/classical_molecular_dynamics.html">Classical Molecular Dynamics</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">csu-wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Submitting Jobs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/computing_resources/running_commands.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="submitting-jobs">
<h1>Submitting Jobs<a class="headerlink" href="#submitting-jobs" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#halting-and-canceling-interactive-processes" id="id1">Halting and Canceling Interactive Processes</a></p></li>
<li><p><a class="reference internal" href="#running-in-background-vs-foreground-and-nohup" id="id2">Running in Background vs Foreground, and nohup</a></p></li>
<li><p><a class="reference internal" href="#listing-and-killing-jobs-running-in-background" id="id3">Listing and Killing Jobs Running in Background</a></p></li>
<li><p><a class="reference internal" href="#using-a-slurm-queueing-manager" id="id4">Using a SLURM Queueing Manager</a></p>
<ul>
<li><p><a class="reference internal" href="#submit-slurm-jobs" id="id5">Submit SLURM Jobs</a></p></li>
<li><p><a class="reference internal" href="#checking-on-jobs" id="id6">Checking on Jobs</a></p></li>
<li><p><a class="reference internal" href="#cancel-slurm-jobs" id="id7">Cancel SLURM Jobs</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>Most of the information on about linux processes comes from
Dr. Bill Miller III at A. T. Still University.</p>
<p>There are a couple different ways of running/executing commands
and calculations. Typically, if you are going to execute a command
straight from the command line on your local computer, then that
is called running a command (or job/calculation) interactively.
Interactive jobs run immediately after you execute them regardless
of the other processes that are occurring already on the computer
that it may or may not conflict with for the available resources.
If you run a job on a cluster (or supercomputer) you are likely
running the command through a queue where you have to share
resources with the other users and the queue scheduler
(which is a script/program itself, not a real person so don’t
try to bribe the scheduler; he doesn’t need your money)
distributes calculations to free compute nodes that have enough
available resources to run the program. This section of the
manual, though, will focus on running jobs interactively on a
local computer/workstation.</p>
<p>Scripts and calculations expected to take limited resources or
very little time can simply be run from the command line without
any real considerations. However, when calculations are expected
to take long periods of times (i.e. more than a few minutes),
I have a few suggestions that might help.</p>
<section id="halting-and-canceling-interactive-processes">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Halting and Canceling Interactive Processes</a><a class="headerlink" href="#halting-and-canceling-interactive-processes" title="Link to this heading"></a></h2>
<p>If you are running a job interactively (i.e. the command prompt is
unresponsive will the command is running), then you can press
<code class="docutils literal notranslate"><span class="pre">ctrl+C</span></code> to cancel/kill the process at any time while it is running.
This will terminate the job from running any longer.</p>
<p>Additionally, you have the option to halt or suspend an interactive
process while it is running using <code class="docutils literal notranslate"><span class="pre">ctrl+Z</span></code>. In other words, you can
press <code class="docutils literal notranslate"><span class="pre">ctrl+Z</span></code> while a command is running and this will temporarily
suspend the process from running. It halts, but it is not killed. This
allows you to use the Terminal’s command prompt again while the job is
halted. At any point, you can continue running the job by typing <code class="docutils literal notranslate"><span class="pre">fg</span></code> to
bring the command back to the foreground.</p>
</section>
<section id="running-in-background-vs-foreground-and-nohup">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Running in Background vs Foreground, and nohup</a><a class="headerlink" href="#running-in-background-vs-foreground-and-nohup" title="Link to this heading"></a></h2>
<p>A typical, short calculation is run in the foreground. This means when you
execute the command, the command prompt on your Terminal becomes unresponsive
until the process has completed. For long processes, I suggest running commands
in the background. This allows the job to continue running in the background
(i.e. without you knowing any difference) and for you to be able to use that
Terminal’s command prompt to do other things.</p>
<p>To run a job in the background, simply append an ampersand (&amp;) to the end of
the command. So if I were going to run a Gaussian 16 QM calculation in the
foreground, the command would simply be</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>g16<span class="w"> </span>structure.com
</pre></div>
</div>
<p>But if I wanted to run that same calculation in the background, the command
would look like this</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>g16<span class="w"> </span>structure.com<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>When you press enter to run this command, a line will be printed to the screen
letting you know the job is running</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span>g16<span class="w"> </span>structure.com<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>At this point (i.e. after this previous line is printed to the screen), if
you press enter again your cursor will be back on the command prompt and you
will be able to use your Terminal window to do more unix-y (yeah, that’s a word) things.</p>
<p>Occasionally, I accidentally execute a command without adding the ampersand at the
end when I really wanted to run the job in the background. So instead of running in
the background, the calculation is running in the foreground. In this situation, I
press <code class="docutils literal notranslate"><span class="pre">ctrl+Z</span></code> to suspend the job. This means the job is simply waiting for you to
let it know it can continue running. If you want the job to begin running in the foreground
again (as it was originally), you could type <code class="docutils literal notranslate"><span class="pre">fg</span></code> (short for foreground). But if you
are like me, and wanted to run the job in the background, simply type <code class="docutils literal notranslate"><span class="pre">bg</span></code> (short
for background; see how they did that?) and press enter on the command prompt and the
job will begin running again but now in the background (and you will get a notification
line like the one mentioned above when I explained how to run g09 in the background).</p>
<p>An extremely helpful program when running process in the background is the <code class="docutils literal notranslate"><span class="pre">nohup</span></code>
command. <code class="docutils literal notranslate"><span class="pre">nohup</span></code> can be added at the beginning of any command and essentially what
it does it ensure that your job continues running, even if you logout of your computer.
This is especially helpful if you are using a public or lb computer that others users
access, or if you are working remotely (i.e. ssh’d into another computer) because using
<code class="docutils literal notranslate"><span class="pre">nohup</span></code> means you can exit (or logout) the remote workstation and your process/command
will continue to run. I use this frequently if I am running a command remotely just in
case the connection between my computer and the remote computer is broken. If you do
not use <code class="docutils literal notranslate"><span class="pre">nohup</span></code>, when the connection is severed, your command will be terminated.
Continuing with the Gaussian 09 theme, if we wanted to initiate a g09 calculation
on a remote computer using nohup, the command would look something like this</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>nohup<span class="w"> </span>g16<span class="w"> </span>structure.com<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>Notice that in addition to using <code class="docutils literal notranslate"><span class="pre">nohup</span></code> at the beginning of the command, we
also made the process run in the background (using the &amp;). If you run a
command using <code class="docutils literal notranslate"><span class="pre">nohup</span></code> in the foreground, then you are defeating the purpose
of using nohup altogether since you are unable to use your Terminal’s command
prompt and when you close the Terminal window or the connection to the remote
computer is lost, your calculation would be killed.</p>
</section>
<section id="listing-and-killing-jobs-running-in-background">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Listing and Killing Jobs Running in Background</a><a class="headerlink" href="#listing-and-killing-jobs-running-in-background" title="Link to this heading"></a></h2>
<p>I have already described to you how to run commands in the background. As long as
you are still using the same Terminal window/tab you used to execute the background
commands, you can type the command jobs to see what processes are running in the
background.</p>
<p>Two processes are distinguished by the [1] or [2] shown at the beginning of each
line. If for some reason I wanted to kill the first job (which I could do
using the kill command along with the corresponding PID number),
I could simple type</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">kill</span><span class="w"> </span>%1
</pre></div>
</div>
<p>and press enter. Similarly, to kill the second job I would just type</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">kill</span><span class="w"> </span>%2
</pre></div>
</div>
<p>In the event I am running a job in the background, I find using jobs
and <code class="docutils literal notranslate"><span class="pre">kill</span> <span class="pre">%</span></code> much more convenient than determining the PID
number from <code class="docutils literal notranslate"><span class="pre">top</span></code> or <code class="docutils literal notranslate"><span class="pre">ps</span></code> and using the <code class="docutils literal notranslate"><span class="pre">kill</span> <span class="pre">-9</span></code> command.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">kill</span></code> command is used to terminate processes that you are
running on your computer. The general syntax for the <code class="docutils literal notranslate"><span class="pre">kill</span></code>
command is</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">kill</span><span class="w"> </span>-9<span class="w"> </span>PID
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-9</span></code> is added to smother the process so it has no chance of
survival. The <code class="docutils literal notranslate"><span class="pre">PID</span></code> is a number that identifies each running
process. You can obtain the <code class="docutils literal notranslate"><span class="pre">`PID</span></code> of any process using either the
<code class="docutils literal notranslate"><span class="pre">ps</span></code> or <code class="docutils literal notranslate"><span class="pre">top</span></code> commands. This should only be used on the local
linux machines, as SLURM has it's own way to kill/cancel a job.</p>
</section>
<section id="using-a-slurm-queueing-manager">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Using a SLURM Queueing Manager</a><a class="headerlink" href="#using-a-slurm-queueing-manager" title="Link to this heading"></a></h2>
<p>SLURM is what we use on ACME and on many high-performance
computing clusters. It is a system manager that implements a
queueing system for job submission, making sure that all users can
run jobs even if nodes are not currently available. Here are a few
helpful commands for using SLURM:</p>
<section id="submit-slurm-jobs">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Submit SLURM Jobs</a><a class="headerlink" href="#submit-slurm-jobs" title="Link to this heading"></a></h3>
<p>On clusters, you often cannot run jobs/processes on the head node, instead
needing to submit to other nodes meant to handle these changes. This means
that you can't submit jobs the way you can on local linux machines. Rather
than just running a command, it's necessary to submit it to the queue.</p>
<p>To do this, you need to first make a submission script, such as this script
to perform a CREST conformational search on ACME:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH -J crest_job</span>
<span class="c1">#SBATCH -p normal</span>
<span class="c1">#SBATCH -t 12:00:00</span>
<span class="c1">#SBATCH --export=NONE</span>
<span class="c1">#SBATCH --ntasks-per-node 16</span>
<span class="c1">#SBATCH --mem=96G</span>
<span class="c1">#SBATCH --output=%x.slurm_%J.out</span>

<span class="c1"># XTB</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">XTBHOME</span><span class="o">=</span>/opt/apps/xtb
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$XTBHOME</span>
<span class="nv">xtbjob</span><span class="o">=</span>crest_search_input.xyz
<span class="nv">Sctchpath</span><span class="o">=</span><span class="s2">&quot;/tmp/</span><span class="nv">$SLURM_JOB_ID</span><span class="s2">&quot;</span>
mkdir<span class="w"> </span><span class="nv">$Sctchpath</span>

<span class="nv">Homepath</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>

cp<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$xtbjob</span><span class="s2">.xyz&quot;</span><span class="w"> </span><span class="nv">$Sctchpath</span>

<span class="nb">cd</span><span class="w"> </span><span class="nv">$Sctchpath</span>

<span class="c1"># Add useful info to top of output file</span>

touch<span class="w"> </span><span class="nv">$Homepath</span>/<span class="nv">$xtbjob</span>.out
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Job Start Time: </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$Homepath</span>/<span class="nv">$xtbjob</span>.out
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SLURM Job ID: </span><span class="nv">$SLURM_JOB_ID</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$Homepath</span>/<span class="nv">$xtbjob</span>.out
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SLURM Job Name: </span><span class="nv">$SLURM_JOB_NAME</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$Homepath</span>/<span class="nv">$xtbjob</span>.out

<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$XTBHOME</span>/bin:
<span class="nv">$XTBHOME</span>/crest<span class="w"> </span><span class="nv">$Sctchpath</span>/<span class="nv">$xtbjob</span>.xyz<span class="w"> </span>--alpb<span class="w"> </span>water<span class="w"> </span>-T<span class="w"> </span><span class="m">16</span><span class="w"> </span>-niceprint<span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$Homepath</span>/<span class="nv">$xtbjob</span>.out
rm<span class="w"> </span>-r<span class="w"> </span>METADYN*<span class="w"> </span>NORMMD*<span class="w"> </span>MRMSD<span class="w"> </span>wbo<span class="w"> </span>cregen_*<span class="w"> </span>coord*
mv<span class="w"> </span>crest_conformers.xyz<span class="w"> </span><span class="nv">$Homepath</span>/<span class="nv">$xtbjob</span>.confs.xyz
mv<span class="w"> </span>crest_best.xyz<span class="w"> </span><span class="nv">$Homepath</span>/<span class="nv">$xtbjob</span>.best.xyz
mv<span class="w"> </span>struc.xyz<span class="w"> </span><span class="nv">$Homepath</span>/<span class="nv">$xtbjob</span>.struc.xyz
rm<span class="w"> </span>./crest*
</pre></div>
</div>
<p>It is important to note the section at the top, all of the <code class="docutils literal notranslate"><span class="pre">#SBATCH</span></code> lines.
The different flags mean different things to help tell the computer how to
allocate resources to you. The <code class="docutils literal notranslate"><span class="pre">-J</span></code> sets the name of your job, here &quot;crest_job&quot;.
<code class="docutils literal notranslate"><span class="pre">-p</span></code> sets the partition you are going to submit to. This can be different for
different clusters. For ACME, we have a &quot;normal&quot; partition, a &quot;short&quot; partition,
a &quot;long&quot; partition, and a &quot;debug&quot; partition, all with different maximum wall times
and priorities in the queue. <code class="docutils literal notranslate"><span class="pre">-t</span></code> sets that maximum wall time. In this case,
your job will run no longer than 12 hours (12:00:00). There are also lines that
specify the number of processors you want to use (<code class="docutils literal notranslate"><span class="pre">--ntasks-per-node</span> <span class="pre">16</span></code>) and
the memory you are allocating to the job (<code class="docutils literal notranslate"><span class="pre">--mem=96GB</span></code>). There are more lines
that you can specify, but these are the most important.</p>
<p>Once you have made a file like this, you can submit it to the queue with</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sbatch<span class="w"> </span>crest_submission_script.sh
</pre></div>
</div>
<p>Then your job will be submitted to the queue and run when it is your turn.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>There is a very easy way to create the submission scripts and submit
jobs on our cluster ACME: <code class="docutils literal notranslate"><span class="pre">gsub</span></code>. This command creates a submission
script and automatically adds your job to the queue with the
specifications you listed. You run this command with
<code class="docutils literal notranslate"><span class="pre">gsub</span> <span class="pre">input.com</span></code> and can change specifications with different flags.
To see what the options are, you can run <code class="docutils literal notranslate"><span class="pre">gsub</span> <span class="pre">-h</span></code> to get a list
of the different ways to adjust the script.</p>
</div>
</section>
<section id="checking-on-jobs">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Checking on Jobs</a><a class="headerlink" href="#checking-on-jobs" title="Link to this heading"></a></h3>
<p>With the queueing system, it's possible that your jobs don't start
immediately. You might want to check on them in the queue to see
if they've started already. You can do this with</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>squeue
</pre></div>
</div>
<p>which will show you all the jobs in the queue. Often, you are only
interested in your own jobs, which you can do with</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>queue<span class="w"> </span>-u<span class="w"> </span>&lt;USER&gt;
</pre></div>
</div>
<p>These are very easy to add as aliases in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> to make it easier.
Here are the ones that I have set up:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span><span class="w"> </span><span class="nv">squ</span><span class="o">=</span><span class="s1">&#39;squeue --format=&quot;%.7A %.35j %.10u %.7C %.10M %.15l %.20R&quot;&#39;</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">q</span><span class="o">=</span><span class="s1">&#39;squeue --user=`whoami` --format=&quot;%.7A %.35j %.10u %.7C %.10M %.15l %.20R&quot;&#39;</span>
</pre></div>
</div>
<p>The extra <code class="docutils literal notranslate"><span class="pre">--format</span></code> tags just expand the display for this command to include
the maximum wall time and number of processors requested, as well as a larger
space allotted for the job title.</p>
<p>It may also be helpful to look into the
<a class="reference external" href="https://csu-theory-suite.github.io/theory-suite-wiki/helpful_packages/inhouse.html#slurm-job-tracking">Slurm Job Tracking</a>
developed within the group.</p>
</section>
<section id="cancel-slurm-jobs">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Cancel SLURM Jobs</a><a class="headerlink" href="#cancel-slurm-jobs" title="Link to this heading"></a></h3>
<p>Information for this section comes from <a class="reference external" href="https://unix.stackexchange.com/questions/424871/how-to-cancel-jobs-on-slurm-with-job-idjob-number-bigger-than-a-certain-number">Stack Overflow</a>.</p>
<p>Using SLURM for job scheduling/queueing can be a really helpful
tool for keeping track of jobs and sharing resources. However,
sometimes you might make a mistake for a large number of job
submissions and want/need to stop them. Here are a few commands
to help with this.</p>
<p>First, maybe you have one job you want to cancel. This is easily
soved with the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>scancel<span class="w"> </span>&lt;JOB<span class="w"> </span>ID&gt;
</pre></div>
</div>
<p>You can find the Job ID for your job with the <code class="docutils literal notranslate"><span class="pre">squeue</span></code>
command under &quot;JOBID&quot;. Each job has a distinct Job ID,
so you only have to worry about cancelling yours.</p>
<p>Another thing that may happen is that you submitted a lot
of jobs with some major flaw, such as an incorrect basis
set. If you want to cancel all of your jobs, use:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>scancel<span class="w"> </span>-u<span class="w"> </span>&lt;USERNAME&gt;
</pre></div>
</div>
<p>This will cancel <strong>all</strong> jobs in the SLURM queue that are
associated with your account.</p>
<p>In the event that you submitted several jobs, then submitted
several more, but want to only keep the new submissions, you
can cancel ranges of Job IDs at a time. For example, if you
started jobs 1000-1010, then started 1015-1030 without canceling
the original 10 jobs, there is still hope! Cancel these jobs with:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>scancel<span class="w"> </span><span class="o">{</span><span class="m">1000</span>..1010<span class="o">}</span>
</pre></div>
</div>
<p>This cancels all jobs with Job IDs between and including 1000 and 1010.
This can also be helpful if you have too many jobs started and
need to stop some to help with organization.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="file_system_layout.html" class="btn btn-neutral float-left" title="File System Layout" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="fun_with_coworkers.html" class="btn btn-neutral float-right" title="Fun with Coworkers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, csu-theory-suite.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>