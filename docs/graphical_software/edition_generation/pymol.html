<!DOCTYPE html>
<html class="writer-html5" lang="python" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pymol &mdash; csu-wiki  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a9e91e84" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=d048f138"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="End-to-End Workflow in ACME" href="../../running_calculations/example_aqme_workflow/example_aqme_workflow.html" />
    <link rel="prev" title="Matplotlib" href="matplotlib.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            csu-wiki
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../computing_resources/paton_computing_resources.html">Paton Lab Computing Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing_resources/kim_computing_resources.html">Kim Lab Computing Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing_resources/essential_unix_commands.html">Essential Unix Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing_resources/file_system_layout.html">File System Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing_resources/running_commands.html">Running Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing_resources/commands_and_tips.html">Helpful Commands and Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing_resources/fun_with_coworkers.html">Fun with Coworkers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../computing_resources/coding_resources.html">Coding Resources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Helpful Packages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../helpful_packages/inhouse.html">In-house</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../helpful_packages/external.html">External</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graphical Software</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../edition_generation.html">Edition/Generation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="inkscape_gimp.html">Inkscape &amp; GIMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="matplotlib.html">Matplotlib</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Pymol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pymol-basics">Pymol Basics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-controls">Basic controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="#basic-commands">Basic commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pymol-scripts-and-command-line-rendering">pymol scripts and command line rendering</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../running_calculations/example_aqme_workflow/example_aqme_workflow.html">End-to-End Workflow in ACME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../running_calculations/example_goodvibes_workflow/example_goodvibes_workflow.html">GoodVibes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../running_calculations/example_reggae_workflow/example_reggae_workflow.html">REGGAE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../running_calculations/example_descriptors_workflow/example_descriptors_workflow.html">RDKit, Mordred, Morfeus &amp; DBStep</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../running_calculations/example_censo_workflow/example_censo_workflow.html">CENSO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../running_calculations/example_nciplot_calculation/example_nciplot_calculation.html">NCIPLOT</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/classical_molecular_dynamics/classical_molecular_dynamics.html">Classical Molecular Dynamics</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">csu-wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../edition_generation.html">Edition/Generation</a></li>
      <li class="breadcrumb-item active">Pymol</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/graphical_software/edition_generation/pymol.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pymol">
<h1>Pymol<a class="headerlink" href="#pymol" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#installation" id="id1">Installation</a></p></li>
<li><p><a class="reference internal" href="#pymol-basics" id="id2">Pymol Basics</a></p>
<ul>
<li><p><a class="reference internal" href="#basic-controls" id="id3">Basic controls</a></p></li>
<li><p><a class="reference internal" href="#basic-commands" id="id4">Basic commands</a></p></li>
<li><p><a class="reference internal" href="#pymol-scripts-and-command-line-rendering" id="id5">pymol scripts and command line rendering</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="installation">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Installation</a><a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>We can install two flavors of Pymol, the &quot;Free for academic use&quot; and the
&quot;Open source&quot;. Here we will see how to set up a new conda environment with the
appropriate libraries to compile the open source version of pymol.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the next steps it will be assumed that you use a UNIX-based OS.
If you want to use windows... try to google &quot;stackoverflow create a new
conda environment in Windows&quot;.</p>
</div>
<p>First we open a new terminal and we create a new conda environment with python 3.8
and the python requisites:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>pymol<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.8
</pre></div>
</div>
<p>or alternatively (we strongly encourage this one)</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-p<span class="w"> </span>path/to/venv/pymol<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.8
</pre></div>
</div>
<p>After creating the environment we need to activate it.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>pymol
</pre></div>
</div>
<p>or if you followed the encouraged creation:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>path/to/venv/pymol
</pre></div>
</div>
<p>Next we are going to install some python packages using pip</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>wheel
python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pmw
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be careful <code class="code docutils literal notranslate"><span class="pre">pmw</span></code> or in other words <code class="code docutils literal notranslate"><span class="pre">Python</span> <span class="pre">MegaWidgets</span></code> is not
the same package as <code class="code docutils literal notranslate"><span class="pre">pwm</span></code> or in other words <code class="code docutils literal notranslate"><span class="pre">password</span> <span class="pre">manager</span></code>.</p>
</div>
<p>As pymol is not a pure python program, it does require some external libraries.
As we might not have admin permissions to install the required libraries and
programs system-wide we will install them in our conda environment:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>anaconda<span class="w"> </span>msgpack-python<span class="w"> </span>pyqt
conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>glew<span class="w"> </span>freeglut<span class="w"> </span>libxml2<span class="w"> </span>glm<span class="w"> </span>libpng<span class="w"> </span>hdf5<span class="w"> </span>libnetcdf
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you ever want to compile code using gcc, make, cmake, g++, ninja you will
need to install them in a similar fashion in your conda environment (even if
they are already available system-wide, otherwise the compilers will be
unable to find the appropriate libraries of the conda environment)</p>
</div>
<p>Now we have the environment ready for compiling pymol. I usually have a folder
in my home directory named 'compiled_software'. If you want to a different setup
change the appropriate paths. We will create the folders where we will have
the installation of pymol as well as the source code.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>
<span class="nb">cd</span><span class="w"> </span>compiled_software
mkdir<span class="w"> </span>pymol
</pre></div>
</div>
<p>Now we download the source code from the
<a class="reference external" href="https://github.com/schrodinger/pymol-open-source">pymol github repository</a>.</p>
<p>You can get whichever version you prefer. I do not recommend to download the
current development code, but instead any of the released versions.</p>
<p class="centered">
<strong><img alt="pymol_github_00" src="../../_images/pymol_github_00.png" /></strong></p><p>Now download your preferred release. Currently the &quot;Free for academic use&quot;
binary corresponds to the <code class="code docutils literal notranslate"><span class="pre">v2.4.0</span></code> version so we will proceed with the
latest release <code class="code docutils literal notranslate"><span class="pre">v2.5.0</span></code></p>
<p class="centered">
<strong><img alt="pymol_github_01" src="../../_images/pymol_github_01.png" /></strong></p><p>Both .zip and .tar.gz correspond to compressed folders, so the next step that we
will do is to uncompress the contents into $HOME/compiled_software/pymol/source
and then we cd into the folder.</p>
<p>For zip:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>unzip<span class="w"> </span><span class="nv">$HOME</span>/Downloads/pymol-open-source-2.5.0.zip<span class="w"> </span>-d<span class="w"> </span><span class="nv">$HOME</span>/compiled_software/pymol
mv<span class="w"> </span><span class="nv">$HOME</span>/compiled_software/pymol/pymol-open-source-2.5.0<span class="w"> </span><span class="nv">$HOME</span>/compiled_software/pymol/source
<span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/compiled_software/pymol/source
</pre></div>
</div>
<p>for tar:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/compiled_software/pymol
tar<span class="w"> </span>-xvzf<span class="w"> </span><span class="nv">$HOME</span>/Downloads/pymol-open-source-2.5.0.tar.gz
mv<span class="w"> </span>pymol-open-source-2.5.0<span class="w"> </span><span class="nb">source</span>
<span class="nb">cd</span><span class="w"> </span><span class="nb">source</span>
</pre></div>
</div>
<p>Now we proceed to compile pymol</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>setup.py<span class="w"> </span>install<span class="w"> </span>--prefix<span class="o">=</span><span class="nv">$HOME</span>/compiled_software/pymol/installation
</pre></div>
</div>
<p>Congrats! now you have sucessfully compiled pymol in your conda environment.
Usually we could just add the path to the pymol binary to our PATH variable and
we would be prepared. However if we don't have the environment active we will
see pymol but it will crash inmediatly. What we are going to do is tweak our
conda environment so that pymol will only be found when we are in this specific
conda environment.</p>
<p>First we switch to the base conda environment and move to the folder where the
files of our environment are.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Yes, here's were you will be grateful of following the advice</strong> of creating
the conda environment with the -p beacause it is the same path that you
specified. Otherwise the files will be wherever your system hosts the base
conda environment... and <strong>you shouldn't</strong> be modifying any of the files of the
base environment in loki, falcon, fireball, buzzsaw, acme... <strong>unless you know
what you are doing</strong>.</p>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate
<span class="nb">cd</span><span class="w"> </span>path/to/venv/pymol
<span class="nb">cd</span><span class="w"> </span>etc
</pre></div>
</div>
<p>Now we will create a conda folder so that we can have a custom setup of global
environment variables specific for our conda environment.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>conda
<span class="nb">cd</span><span class="w"> </span>conda
mkdir<span class="w"> </span>activate.d<span class="w"> </span>deactivate.d
touch<span class="w"> </span>activate.d/env_vars.sh
touch<span class="w"> </span>deactivate.d/env_vars.sh
</pre></div>
</div>
<p>Use now your favorite text editor to write the following contents in
<cite>activate.d/env_vars.sh</cite>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">MYOLDPATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="p">;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span>:<span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/compiled_software/pymol/installation/bin<span class="p">;</span>
</pre></div>
</div>
<p>and in <cite>deactivate.d/env_vars.sh</cite>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">MYOLDPATH</span><span class="si">}</span><span class="p">;</span>
<span class="nb">unset</span><span class="w"> </span>MYOLDPATH<span class="p">;</span>
</pre></div>
</div>
<p>Finally lets test that you can access pymol in your environment:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>
conda<span class="w"> </span>activate<span class="w"> </span>path/to/venv/pymol
pymol<span class="w"> </span>--help
</pre></div>
</div>
</section>
<section id="pymol-basics">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Pymol Basics</a><a class="headerlink" href="#pymol-basics" title="Link to this heading"></a></h2>
<section id="basic-controls">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Basic controls</a><a class="headerlink" href="#basic-controls" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p class="centered">
<strong>Rotation</strong></p></td>
<td><p class="centered">
<strong>Translate</strong></p></td>
</tr>
<tr class="row-even"><td><p class="centered">
<strong><img alt="pymol_rotation" src="../../_images/pymol_rotation.png" /></strong></p></td>
<td><p class="centered">
<strong><img alt="pymol_translation" src="../../_images/pymol_translation.png" /></strong></p></td>
</tr>
<tr class="row-odd"><td><p class="centered">
<strong>Zoom</strong></p></td>
<td><p class="centered">
<strong>Clip</strong></p></td>
</tr>
<tr class="row-even"><td><p class="centered">
<strong><img alt="pymol_zoom" src="../../_images/pymol_zoom.png" /></strong></p></td>
<td><p class="centered">
<strong><img alt="pymol_clip" src="../../_images/pymol_clip.png" /></strong></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p class="centered">
<strong>Selection</strong></p></td>
</tr>
<tr class="row-even"><td><p class="centered">
<strong><img alt="pymol_selection" src="../../_images/pymol_selection.png" /></strong></p></td>
</tr>
</tbody>
</table>
</section>
<section id="basic-commands">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Basic commands</a><a class="headerlink" href="#basic-commands" title="Link to this heading"></a></h3>
<p>One of the first commands that we end up requiring when we are using pymol
is the command <code class="code docutils literal notranslate"><span class="pre">set_name</span></code>. Giving names to atom selections allows us to
more easily change the representations of our molecules but the default name of
our selection when we use the mouse to select the atoms is <em>sele</em>.</p>
<p class="centered">
<strong><img alt="pymol_command_lines" src="../../_images/pymol_command_lines.png" /></strong></p><p>We can type commands in any of the pymol command lines, I do recommend using the
top one, since pushing <code class="code docutils literal notranslate"><span class="pre">Esc</span></code> in the bottom one will switch the view of our
molecule for a list of commands (We can easily go back by pressing the same button)</p>
<p>Here we will only need to type the command and the first parameter of the
command and any second, third or fourth parameter will be separated by a comma.
In the specific case of <code class="code docutils literal notranslate"><span class="pre">set_name</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PyMOL&gt; set_name sele, fragment_A
</pre></div>
</div>
<p>Now we move to another of the most useful command-line commands of pymol,
<code class="code docutils literal notranslate"><span class="pre">select</span></code>. As the name of the command hint it allows to create an atom
selection from the command line. This can be specially useful when we have a huge
quantity of atoms that we want to select. It is its own conditional language and
we a more detailed description in the
<a class="reference external" href="https://pymolwiki.org/index.php/Selection_Algebra">Selection Algebra</a> section
of the pymol documentation.</p>
<p>Now as example we will select the atoms of our molecule that we did not select
previously and we will name that selection as <code class="code docutils literal notranslate"><span class="pre">fragment_B</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PyMOL&gt; select fragment_B, all and not fragment_A
</pre></div>
</div>
<p>Now lets say that we want to visualize <code class="code docutils literal notranslate"><span class="pre">fragment_A</span></code> using a VdW spheres
representation and <code class="code docutils literal notranslate"><span class="pre">fragment_B</span></code> using a ball and stick model. We can do
that with the mouse using the appropriate menus, but let's do it with the
command line!</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PyMOL&gt; show spheres, fragment_A
PyMOL&gt; preset.ball_and_stick(&#39;fragment_B&#39;)
</pre></div>
</div>
<p>Now lets create a new color (which we will call <code class="code docutils literal notranslate"><span class="pre">gurei</span></code>) and color everything by atom with the carbons in
that specific color.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PyMOL&gt; set_color gurey, [0.66,0.66,0.66]
PyMOL&gt; util.cba(&#39;gurey&#39;)
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>more information about coloring can be found in the <a class="reference external" href="https://pymolwiki.org/index.php/Color">color</a>
and <a class="reference external" href="https://pymolwiki.org/index.php/Advanced_Coloring">Advanced coloring</a>
sections of the pymol wiki.</p>
</div>
<p>Now we are going to ray_trace our molecule. Ray-tracing a 3D model involves
calculating and adding to the final figure the appropriate lighting and shadows
of the 3D model. In other words, making your figure prettier than what it
usually looks in the normal viewer.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PyMOL&gt; ray
</pre></div>
</div>
<p>If we use ray by default the dimensions of the figure are going to be dependent
on our screen and the size of the window where we are visualizing the molecule.
If we want a higher resolution we have the option of buying a new screen with a
really high resolution, resizing the window until the limits of our screen, or
actually spend 30 seconds of our life understanding the syntax of the ray
command in the <a class="reference external" href="https://pymolwiki.org/index.php/Ray">pymol documentation</a>.
It's your choice! but as I'm very picky with my figures and you are reading my
tutorial, lets behave like homo sapiens sapiens for once. We will render a
figure of 800x600 px (width x height).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PyMOL&gt; ray 800, 600
</pre></div>
</div>
<p>Great! now let me present to you the ray_trace_mode variable. If we change the
value of this variable the type of rendering and ray-tracing of our molecule
will change. It is very well documented in the pymol wiki but feel free to play
with it a bit. Here's the syntax to change its value and ray-trace afterwards.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PyMOL&gt; set ray_trace_mode, 1
PyMOL&gt; ray 800, 600
</pre></div>
</div>
<p>After the ray trace, we can go to the File menu and export the image
appropriatedly but what fun is it to do it with the mouse when we have arrived
so far away using the command line? Let's write it instead!</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PyMOL&gt; png my_frankenstein_molecule.png
</pre></div>
</div>
<p>Hurray!</p>
</section>
<section id="pymol-scripts-and-command-line-rendering">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">pymol scripts and command line rendering</a><a class="headerlink" href="#pymol-scripts-and-command-line-rendering" title="Link to this heading"></a></h3>
<p>Our next step in this journey is to translate everything that we did to a python
script. You may wonder why? well I suggest you try to render a protein in cartoon
mode with a 4000x4000 resolution.</p>
<p>As you curse me in the event that you actually attempted that, now you know why
sometimes it is very usefull to run pymol without GUI. Especially when your
group has some fairly powerfull computers (falcon, buzzsaw, fireball, loki...)
<strong>and no one is using them at that moment</strong></p>
<p>First let's show the syntax to run a python script with pymol through the
command line without the GUI:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pymol<span class="w"> </span>-c<span class="w"> </span>-r<span class="w"> </span>path/to/my/python_script.py
</pre></div>
</div>
<p>Simple right? remember that the it will run in the foreground and as a
consecuence it will lock your terminal until it finishes. If you want to run it
in the background:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pymol<span class="w"> </span>-c<span class="w"> </span>-r<span class="w"> </span>path/to/my/python_script.py<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>and if you want to be able to log out of the computer but maintain the process
running:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>nohup<span class="w"> </span>pymol<span class="w"> </span>-c<span class="w"> </span>-r<span class="w"> </span>path/to/my/python_script.py<span class="w"> </span><span class="p">&amp;</span>
</pre></div>
</div>
<p>And now let's see how a python script that loads a molecule from a file,
colors it by atom (with 'gurey' carbons) renders and saves it,  looks like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymol</span> <span class="kn">import</span> <span class="n">cmd</span><span class="p">,</span> <span class="n">stored</span><span class="p">,</span> <span class="n">util</span>

<span class="n">ifile</span> <span class="o">=</span> <span class="s1">&#39;mymolecule.xyz&#39;</span> <span class="c1"># .pse files can also be loaded</span>

<span class="n">cmd</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ifile</span><span class="p">)</span>

<span class="n">cmd</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="s2">&quot;preset.ball_and_stick(&#39;all&#39;)&quot;</span><span class="p">)</span>
<span class="n">carbon_color</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.666</span><span class="p">,</span><span class="mf">0.666</span><span class="p">,</span><span class="mf">0.666</span><span class="p">]</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;gurey&#39;</span><span class="p">,</span><span class="n">carbon_color</span><span class="p">)</span>
<span class="n">util</span><span class="o">.</span><span class="n">cba</span><span class="p">(</span><span class="s1">&#39;gurey&#39;</span><span class="p">,</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

<span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">2751</span><span class="p">,</span> <span class="mi">2286</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">ray</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">png</span><span class="p">(</span><span class="s1">&#39;mymolecule.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you read the previous section, you can probably start tying things together
and see how, in general, translating from pymol commands to their python
counterpart can be relatively easy.</p>
<p>In case I might not have been clear enough regarding how well done the pymol
documentation is written, let me insist on it. In the following picture we can
see how beautifully and easily we can find the syntax in pymol as well as the
syntax in python for the same pymol command with all their parameters explained.</p>
<p class="centered">
<strong><img alt="pymol_wiki_screenshot" src="../../_images/pymol_wiki_screenshot.png" /></strong></p><div class="admonition note">
<p class="admonition-title">Note</p>
<p>You might not believe it, but they happen to have a similar scheme for all
their commands in the wiki. I know it's crazy right?? and even with such a
wonderfully crafted documentation there is people who would rather enlarge
the window to increase the quality of the rendered figure over checking the
documentation. People are crazy!</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="matplotlib.html" class="btn btn-neutral float-left" title="Matplotlib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../running_calculations/example_aqme_workflow/example_aqme_workflow.html" class="btn btn-neutral float-right" title="End-to-End Workflow in ACME" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, csu-theory-suite.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>